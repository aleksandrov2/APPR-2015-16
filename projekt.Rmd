---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Patrik Gorše"
output:
  pdf_document:
    latex_engine: xelatex
    includes:
      in_header: lib/styles.sty
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Izbral sem si temo "Dolgovi in primankljaji držav v Evropski uniji". To je zelo pomembna tema, saj bodo odločitve politikov in ekonomistov, kakšna naj bo naša strategija pri zadolževanju, uplivale na vsakdanje življenje vseh nas. Na eni strani so nekateri ekonomisti prepričani, da je treba vzdrževati strogo proračunsko disciplino, torej porabiti toliko kolikor država pobere z davki. Ostali pa verjamejo, da je proračunski primakljaj nujen, če hočemo preprečiti ponoven padec v recesijo.



# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Podatke za prvi dve tabeli sem uvozil iz spletne strani OECD. Tam sem izbral samo podatke evropskih držav, potem pa sem uvozil cvs datoteki na računalnik. Tabelo, ki prikazuje tudi dolg ZDA in Japonske v letih 2007, 2010 in 2011 v primerjavi z evropskimi državami, pa sem kot HTML datoteko uvozil iz Wikipedije. 
Prva tabela prikazuje dolg evropskih držav, druga deficit teh držav in tretja prikazuje dolg ZDA in Japonske v primerjavi z evropskim.

Povezavi za tabele:
- https://data.oecd.org/gga/general-government-debt.htm
- https://en.wikipedia.org/wiki/National_debt_of_the_United_States

***


Spodaj so po posameznih tabelah prikazani stolpci 


Prva tabela:
- LOCATION (ime države)
- INDICATOR (dolg države)
- SUBJECT 
- MEASURE (merimo v BDP na prebivalca)
- FREQUENCY
- TIME (leto)
- VALUE (višina zadolženosti)
- Flag Codes

Druga tabela: 
- LOCATION (ime države)
- INDICATOR (deficit države)
- SUBJECT 
- MEASURE (merimo v BDP na prebivalca)
- FREQUENCY
- TIME (leto)
- VALUE (višina deficita)
- Flag Codes

Tretja tabela:
- Entity (ime države)
- 2007 (pokaže višino zadolženosti države leta 2007)
- 2010 (pokaže višino zadolženosti države leta 2010)
- 2011 (pokaže višino zadolženosti države leta 2011)

V prvih dveh tabelah sem nepotrebne stolpce izbrisal in preostalim stolpcem spremenil imena v slovenskem jeziku. Prav tako sem ustvaril še veliko podtabel, ki prikazujejo zadolženost/deficit držav po posameznih letih. Za vsako leto od 2006 do 2014 sem naredil posebno podtabelo, ki prikazuje stanje držav glede na določeno leto. Prav tako sem iz danih podatkov ustvaril tabeli, ki imata v prvem stolpcu ime države, potem pa vsi naslednji stolpci prikazujejo dolg/deficit po sveh letih po vrsti od 2006 do 2014. 

Tretja tabela, ki je bila uvožena v HTML obliki vsebuje podatke zadolženosti ZDA, Japonske, Velike Britanije, večjih evropskih držav in povprečja EU. Naredil sem 3 podtabele, kjer vsaka prikazuje zadolženost držav v letih 2007, 2010 in 2011.





***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```

Slika \ref{fig:zemljevid} prikazuje povprečno velikost družine za vsako občino.

```{r zemljevid, echo=FALSE, fig.align='center', fig.cap='Zemljevid povprečnega števila otrok v družini'}
n <- 100
barve <- topo.colors(n)[1+(n-1)*(druzine$povprecje-min.povprecje)/(max.povprecje-min.povprecje)]
plot(zemljevid, col = barve)
title("Povprečno število otrok v družini")
```

***

# Napredna analiza podatkov

```{r analiza, echo=FALSE}
source("analiza/analiza.r", encoding = "UTF-8")
```

Slika \ref{fig:graf} prikazuje povezavo med številom naselij in površino občine.

```{r graf, echo=FALSE, fig.align='center', fig.cap='Povezava med številom naselij in površino občine'}
plot(obcine[[1]], obcine[[4]],
     main = "Število naselij glede na površino občine",
     xlab = expression("Površina (km"^2 * ")"),
     ylab = "Št. naselij",
     col = barve[obcine[[7]]],
     pch = 18)
legend("topright", legend = names(barve), col = barve,
       pch = 18, cex = 0.5, bg = "white")
```

***
